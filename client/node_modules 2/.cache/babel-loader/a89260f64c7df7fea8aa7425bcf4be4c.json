{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nicolebrooks/Desktop/Spots/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./CreateSpot.css\";import{Redirect}from\"react-router-dom\";import{Form}from\"react-bootstrap\";var CreateSpot=/*#__PURE__*/function(_React$Component){_inherits(CreateSpot,_React$Component);var _super=_createSuper(CreateSpot);function CreateSpot(){var _this;_classCallCheck(this,CreateSpot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:\"\",address:\"\",spotType:\"\",description:\"\",coordinates:[],latitude:\"\",longitude:\"\",photo:null,succesfulCreate:false};_this.handleInputChange=function(event){console.log(event.target.id);_this.setState(_defineProperty({},event.target.id,event.target.value));};_this.handleFileChange=function(event){console.log(event.target.files[0]);_this.setState({photo:event.target.files[0]});};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var encodedAddress,geodata,dataa,newPost,formData,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();encodedAddress=encodeURI(_this.state.address);_context.next=4;return fetch(\"https://google-maps-geocoding.p.rapidapi.com/geocode/json?language=en&address=\".concat(encodedAddress),{method:\"GET\",headers:{\"x-rapidapi-host\":\"google-maps-geocoding.p.rapidapi.com\",\"x-rapidapi-key\":\"3daff95accmshe6470f33432001bp1b0220jsn683860acd393\"}});case 4:geodata=_context.sent;_context.next=7;return geodata.json();case 7:dataa=_context.sent;console.log(\"geodata\",dataa);if(dataa.results.length>0)_this.setState({address:dataa.results[0].formatted_address});_this.setState({latitude:dataa.results[0].geometry.location.lat});_this.setState({longitude:dataa.results[0].geometry.location.lng});newPost={name:_this.state.name,address:_this.state.address,spotType:_this.state.spotType,description:_this.state.description,latitude:_this.state.latitude,longitude:_this.state.longitude,photo:_this.state.photo};console.log(newPost);formData=new FormData();formData.append(\"photo\",_this.state.photo);formData.append(\"address\",_this.state.address);formData.append(\"spotType\",_this.state.spotType);formData.append(\"description\",_this.state.description);formData.append(\"latitude\",_this.state.latitude);formData.append(\"longitude\",_this.state.longitude);formData.append(\"name\",_this.state.name);_context.next=24;return fetch(\"/api/v1/users/\".concat(_this.props.userId,\"/spots\"),{method:\"POST\",body:formData});case 24:res=_context.sent;_context.next=27;return res.json();case 27:data=_context.sent;if(res.ok){_this.setState({successfulCreate:true});}else{console.log(data);alert(data.message);}console.log(\"post\",data);case 30:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(CreateSpot,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"render\",value:function render(){if(this.state.successfulCreate){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",{className:\"createContainer\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Create Spot\"),/*#__PURE__*/React.createElement(Form,{className:\"form\",onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Name the Spot\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",name:\"name\",value:this.state.name,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"address\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",name:\"address\",value:this.state.address,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"spotType\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Spot Type\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",value:this.state.spotType,onChange:this.handleInputChange},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:true,selected:true}),/*#__PURE__*/React.createElement(\"option\",null,\"street\"),/*#__PURE__*/React.createElement(\"option\",null,\"park\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"description\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Description\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"textarea\",name:\"description\",value:this.state.description,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"photo\"},/*#__PURE__*/React.createElement(Form.File,{type:\"file\",name:\"photo\",label:\"Example file input\",onChange:this.handleFileChange})),/*#__PURE__*/React.createElement(\"button\",null,\"Submit\"),/*#__PURE__*/React.createElement(Form.Group,{className:\"formGroup\",controlId:\"longitude\"},/*#__PURE__*/React.createElement(Form.Label,null),/*#__PURE__*/React.createElement(Form.Control,{type:\"hidden\",name:\"longitude\",value:this.state.longitude,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{className:\"formGroup\",controlId:\"latitude\"},/*#__PURE__*/React.createElement(Form.Label,null),/*#__PURE__*/React.createElement(Form.Control,{type:\"hidden\",name:\"latitude\",value:this.state.latitude,onChange:this.handleInputChange}))));}}]);return CreateSpot;}(React.Component);export default CreateSpot;","map":{"version":3,"sources":["/Users/nicolebrooks/Desktop/Spots/Client/src/pages/CreateSpot/CreateSpot.js"],"names":["React","Redirect","Form","CreateSpot","state","name","address","spotType","description","coordinates","latitude","longitude","photo","succesfulCreate","handleInputChange","event","console","log","target","id","setState","value","handleFileChange","files","onSubmit","preventDefault","encodedAddress","encodeURI","fetch","method","headers","geodata","json","dataa","results","length","formatted_address","geometry","location","lat","lng","newPost","formData","FormData","append","props","userId","body","res","data","ok","successfulCreate","alert","message","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./CreateSpot.css\";\nimport { Redirect } from \"react-router-dom\";\nimport { Form } from \"react-bootstrap\";\n\nclass CreateSpot extends React.Component {\n  state = {\n    name: \"\",\n    address: \"\",\n    spotType: \"\",\n    description: \"\",\n    coordinates: [],\n    latitude: \"\",\n    longitude: \"\",\n    photo: null,\n    succesfulCreate: false,\n  };\n\n  handleInputChange = (event) => {\n    console.log(event.target.id);\n    this.setState({ [event.target.id]: event.target.value });\n  };\n\n  handleFileChange = (event) => {\n    console.log(event.target.files[0]);\n    this.setState({ photo: event.target.files[0] });\n  };\n\n  onSubmit = async (event) => {\n    event.preventDefault();\n    const encodedAddress = encodeURI(this.state.address);\n    const geodata = await fetch(\n      `https://google-maps-geocoding.p.rapidapi.com/geocode/json?language=en&address=${encodedAddress}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"x-rapidapi-host\": \"google-maps-geocoding.p.rapidapi.com\",\n          \"x-rapidapi-key\":\n            \"3daff95accmshe6470f33432001bp1b0220jsn683860acd393\",\n        },\n      }\n    );\n    const dataa = await geodata.json();\n    console.log(\"geodata\", dataa);\n    if (dataa.results.length > 0)\n      this.setState({ address: dataa.results[0].formatted_address });\n    this.setState({ latitude: dataa.results[0].geometry.location.lat });\n    this.setState({ longitude: dataa.results[0].geometry.location.lng });\n    const newPost = {\n      name: this.state.name,\n      address: this.state.address,\n      spotType: this.state.spotType,\n      description: this.state.description,\n      latitude: this.state.latitude,\n      longitude: this.state.longitude,\n      photo: this.state.photo,\n    };\n    console.log(newPost);\n\n    const formData = new FormData();\n    formData.append(\"photo\", this.state.photo);\n    formData.append(\"address\", this.state.address);\n    formData.append(\"spotType\", this.state.spotType);\n    formData.append(\"description\", this.state.description);\n    formData.append(\"latitude\", this.state.latitude);\n    formData.append(\"longitude\", this.state.longitude);\n    formData.append(\"name\", this.state.name);\n\n    const res = await fetch(`/api/v1/users/${this.props.userId}/spots`, {\n      method: \"POST\",\n      body: formData,\n    });\n    const data = await res.json();\n    if (res.ok) {\n      this.setState({ successfulCreate: true });\n    } else {\n      console.log(data);\n      alert(data.message);\n    }\n    console.log(\"post\", data);\n  };\n\n  componentDidMount() {}\n\n  render() {\n    if (this.state.successfulCreate) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <div className=\"createContainer\">\n        <h1>Create Spot</h1>\n        <Form className=\"form\" onSubmit={this.onSubmit}>\n          <Form.Group controlId=\"name\">\n            <Form.Label>Name the Spot</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"name\"\n              value={this.state.name}\n              onChange={this.handleInputChange}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"address\">\n            <Form.Label>Address</Form.Label>\n            <Form.Control\n              type=\"text\"\n              name=\"address\"\n              value={this.state.address}\n              onChange={this.handleInputChange}\n            />\n          </Form.Group>\n\n          <Form.Group controlId=\"spotType\">\n            <Form.Label>Spot Type</Form.Label>\n            <Form.Control\n              as=\"select\"\n              value={this.state.spotType}\n              onChange={this.handleInputChange}\n            >\n              <option value=\"\" disabled selected></option>\n              <option>street</option>\n              <option>park</option>\n            </Form.Control>\n          </Form.Group>\n          <Form.Group controlId=\"description\">\n            <Form.Label>Description</Form.Label>\n            <Form.Control\n              type=\"textarea\"\n              name=\"description\"\n              value={this.state.description}\n              onChange={this.handleInputChange}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"photo\">\n            <Form.File\n              type=\"file\"\n              name=\"photo\"\n              label=\"Example file input\"\n              onChange={this.handleFileChange}\n            />\n          </Form.Group>\n\n          <button>Submit</button>\n          <Form.Group className=\"formGroup\" controlId=\"longitude\">\n            <Form.Label></Form.Label>\n            <Form.Control\n              type=\"hidden\"\n              name=\"longitude\"\n              value={this.state.longitude}\n              onChange={this.handleInputChange}\n            />\n          </Form.Group>\n          <Form.Group className=\"formGroup\" controlId=\"latitude\">\n            <Form.Label></Form.Label>\n            <Form.Control\n              type=\"hidden\"\n              name=\"latitude\"\n              value={this.state.latitude}\n              onChange={this.handleInputChange}\n            />\n          </Form.Group>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default CreateSpot;\n"]},"metadata":{},"sourceType":"module"}