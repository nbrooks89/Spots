{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./Account.css\";import{Redirect}from\"react-router-dom\";import{Container,Col,Form,FormGroup,Label,Input,Button,Alert}from\"reactstrap\";var Account=/*#__PURE__*/function(_React$Component){_inherits(Account,_React$Component);var _super=_createSuper(Account);function Account(){var _this;_classCallCheck(this,Account);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentName:\"\",currentEmail:\"\",name:\"\",email:\"\",passwordCurrent:\"\",password:\"\",passwordConfirm:\"\",succesfulCreate:false,user:{}};_this.handleInputChangeData=function(event){console.log(event.target.value);var _event$target=event.target,value=_event$target.value,name=_event$target.name;_this.setState(_defineProperty({},name,value));};_this.handleInputChange=function(event){var _event$target2=event.target,value=_event$target2.value,name=_event$target2.name;_this.setState(_defineProperty({},name,value));};_this.currentUser=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/v1/users/me\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;console.log(data);_this.setState({user:data.data.user});case 8:case\"end\":return _context.stop();}}},_callee);}));_this.onSubmitData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;event.preventDefault();_context2.next=4;return fetch(\"api/v1/users/updateMe\",{method:\"PATCH\",body:JSON.stringify(_this.state),headers:{\"Content-Type\":\"application/json\"}});case 4:res=_context2.sent;_context2.next=7;return res.json();case 7:data=_context2.sent;if(res.ok){setTimeout(function(){alert(\"succesfully updated user info\");},100);_this.setState({successfulCreate:true});}else{console.log(data);}_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);// expected output: ReferenceError: nonExistentFunction is not defined\n// Note - error messages will vary depending on browser\ncase 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.onSubmitPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var res,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;event.preventDefault();_context3.next=4;return fetch(\"api/v1/users/updateMyPassword\",{method:\"PATCH\",body:JSON.stringify(_this.state),headers:{\"Content-Type\":\"application/json\"}});case 4:res=_context3.sent;_context3.next=7;return res.json();case 7:data=_context3.sent;console.log(data);if(res.ok){_this.setState({successfulCreate:true});}else{console.log(data);alert(data.message);}_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,12]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();return _this;}_createClass(Account,[{key:\"componentDidMount\",value:function componentDidMount(){this.currentUser();}},{key:\"render\",value:function render(){if(this.state.successfulCreate){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}console.log(this.state.user);return/*#__PURE__*/React.createElement(\"div\",{className:\"updateAccountContainer\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Account Settings\"),/*#__PURE__*/React.createElement(Form,{className:\"form\",onSubmit:this.onSubmitData},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"Name\"},\"Name\"),/*#__PURE__*/React.createElement(Input,{type:\"name\",name:\"name\",id:\"name\",defaultValue:this.state.user.name,onChange:this.handleInputChangeData,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"Email\"},\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"email\",name:\"email\",id:\"email\",defaultValue:this.state.user.email,onChange:this.handleInputChangeData,required:true}))),/*#__PURE__*/React.createElement(Input,{className:\"updateButton\",type:\"submit\",value:\"Update\"})),this.state.errorMessage&&/*#__PURE__*/React.createElement(\"h3\",{className:\"error\"},\" \",this.state.errorMessage,\" \"),/*#__PURE__*/React.createElement(Form,{className:\"form\",onSubmit:this.onSubmitPassword},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"current Password\"),/*#__PURE__*/React.createElement(Input,{type:\"passwordCurrent\",name:\"passwordCurrent\",id:\"passwordCurrent\",placeholder:\"************\",value:this.state.passwordCurrent,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"password\"},\"New Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",id:\"password\",placeholder:\"************\",value:this.state.password,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"passwordConfirm\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(Input,{type:\"passwordConfirm\",name:\"passwordConfirm\",id:\"passwordConfirm\",placeholder:\"*******\",value:this.state.passwordConfirm,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Input,{type:\"submit\",value:\"Update\"})));}}]);return Account;}(React.Component);export default Account;","map":{"version":3,"sources":["/Users/nicolebrooks/Desktop/spots-front/src/pages/Account/Account.js"],"names":["React","Redirect","Container","Col","Form","FormGroup","Label","Input","Button","Alert","Account","state","currentName","currentEmail","name","email","passwordCurrent","password","passwordConfirm","succesfulCreate","user","handleInputChangeData","event","console","log","target","value","setState","handleInputChange","currentUser","fetch","method","headers","res","json","data","onSubmitData","preventDefault","body","JSON","stringify","ok","setTimeout","alert","successfulCreate","error","onSubmitPassword","message","errorMessage","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Account.css\";\nimport { Redirect } from \"react-router-dom\";\n\nimport {\n  Container,\n  Col,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  Button,\n  Alert,\n} from \"reactstrap\";\n\nclass Account extends React.Component {\n  state = {\n    currentName: \"\",\n    currentEmail: \"\",\n    name: \"\",\n    email: \"\",\n    passwordCurrent: \"\",\n    password: \"\",\n    passwordConfirm: \"\",\n    succesfulCreate: false,\n    user: {},\n  };\n\n  handleInputChangeData = (event) => {\n    console.log(event.target.value);\n    const { value, name } = event.target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleInputChange = (event) => {\n    const { value, name } = event.target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  currentUser = async () => {\n    const res = await fetch(\"/api/v1/users/me\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    const data = await res.json();\n    console.log(data);\n    this.setState({ user: data.data.user });\n  };\n\n  onSubmitData = async (event) => {\n    try {\n      event.preventDefault();\n      const res = await fetch(\"api/v1/users/updateMe\", {\n        method: \"PATCH\",\n        body: JSON.stringify(this.state),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      const data = await res.json();\n\n      if (res.ok) {\n        setTimeout(function () {\n          alert(\"succesfully updated user info\");\n        }, 100);\n\n        this.setState({ successfulCreate: true });\n      } else {\n        console.log(data);\n      }\n    } catch (error) {\n      console.error(error);\n      // expected output: ReferenceError: nonExistentFunction is not defined\n      // Note - error messages will vary depending on browser\n    }\n  };\n\n  onSubmitPassword = async (event) => {\n    try {\n      event.preventDefault();\n      const res = await fetch(\"api/v1/users/updateMyPassword\", {\n        method: \"PATCH\",\n        body: JSON.stringify(this.state),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      const data = await res.json();\n      console.log(data);\n      if (res.ok) {\n        this.setState({ successfulCreate: true });\n      } else {\n        console.log(data);\n        alert(data.message);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  componentDidMount() {\n    this.currentUser();\n  }\n\n  render() {\n    if (this.state.successfulCreate) {\n      return <Redirect to=\"/\" />;\n    }\n    console.log(this.state.user);\n    return (\n      <div className=\"updateAccountContainer\">\n        <h1>Account Settings</h1>\n        <Form className=\"form\" onSubmit={this.onSubmitData}>\n          <Col>\n            <FormGroup>\n              <Label for=\"Name\">Name</Label>\n              <Input\n                type=\"name\"\n                name=\"name\"\n                id=\"name\"\n                defaultValue={this.state.user.name}\n                onChange={this.handleInputChangeData}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label for=\"Email\">Email</Label>\n              <Input\n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n                defaultValue={this.state.user.email}\n                onChange={this.handleInputChangeData}\n                required\n              />\n            </FormGroup>\n          </Col>\n\n          <Input className=\"updateButton\" type=\"submit\" value=\"Update\" />\n        </Form>\n        {this.state.errorMessage && (\n          <h3 className=\"error\"> {this.state.errorMessage} </h3>\n        )}\n        <Form className=\"form\" onSubmit={this.onSubmitPassword}>\n          <Col>\n            <FormGroup>\n              <Label>current Password</Label>\n              <Input\n                type=\"passwordCurrent\"\n                name=\"passwordCurrent\"\n                id=\"passwordCurrent\"\n                placeholder=\"************\"\n                value={this.state.passwordCurrent}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label for=\"password\">New Password</Label>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                id=\"password\"\n                placeholder=\"************\"\n                value={this.state.password}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label for=\"passwordConfirm\">Confirm Password</Label>\n              <Input\n                type=\"passwordConfirm\"\n                name=\"passwordConfirm\"\n                id=\"passwordConfirm\"\n                placeholder=\"*******\"\n                value={this.state.passwordConfirm}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n\n          <Input type=\"submit\" value=\"Update\" />\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default Account;\n"]},"metadata":{},"sourceType":"module"}