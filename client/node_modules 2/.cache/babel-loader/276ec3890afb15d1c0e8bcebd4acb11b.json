{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./LogIn.css\";import{Redirect}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import{Container,Col,Form,FormGroup,Label,Input}from\"reactstrap\";var LogIn=/*#__PURE__*/function(_React$Component){_inherits(LogIn,_React$Component);var _super=_createSuper(LogIn);function LogIn(){var _this;_classCallCheck(this,LogIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",data:[],succesfulCreate:false};_this.handleInputChange=function(event){var _this$setState;var _event$target=event.target,value=_event$target.value,name=_event$target.name;_this.setState((_this$setState={},_defineProperty(_this$setState,name,value),_defineProperty(_this$setState,\"token\",null),_this$setState));};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var res,data,jwt,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();_context.next=4;return fetch(\"/api/v1/users/login\",{method:\"POST\",body:JSON.stringify(_this.state),headers:{\"Content-Type\":\"application/json\"}});case 4:res=_context.sent;_context.next=7;return res.json();case 7:data=_context.sent;if(!res.ok){_context.next=17;break;}_context.next=11;return localStorage.setItem(\"jwt\",data.token);case 11:_context.next=13;return localStorage.getItem(\"jwt\");case 13:jwt=_context.sent;if(jwt){user=jwt_decode(jwt);_this.props.setUser(user);_this.setState({successfulCreate:true});}_context.next=19;break;case 17:console.log(data);alert(data.message);case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,21]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(LogIn,[{key:\"render\",value:function render(){console.log(this.state.data);if(this.state.successfulCreate){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(Container,{className:\"App\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Log In\"),/*#__PURE__*/React.createElement(Form,{className:\"form\",onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"email\",name:\"email\",id:\"exampleEmail\",placeholder:\"myemail@email.com\",value:this.state.email,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"examplePassword\"},\"Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",id:\"examplePassword\",placeholder:\"********\",value:this.state.password,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Input,{type:\"submit\",value:\"Submit\"})));}}]);return LogIn;}(React.Component);export default LogIn;","map":{"version":3,"sources":["/Users/nicolebrooks/Desktop/spots-front/src/pages/LogIn/LogIn.js"],"names":["React","Redirect","jwt_decode","Container","Col","Form","FormGroup","Label","Input","LogIn","state","email","password","data","succesfulCreate","handleInputChange","event","target","value","name","setState","onSubmit","preventDefault","fetch","method","body","JSON","stringify","headers","res","json","ok","localStorage","setItem","token","getItem","jwt","user","props","setUser","successfulCreate","console","log","alert","message","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./LogIn.css\";\nimport { Redirect } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport { Container, Col, Form, FormGroup, Label, Input } from \"reactstrap\";\n\nclass LogIn extends React.Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    data: [],\n    succesfulCreate: false,\n  };\n\n  handleInputChange = (event) => {\n    const { value, name } = event.target;\n    this.setState({\n      [name]: value,\n      token: null,\n    });\n  };\n\n  onSubmit = async (event) => {\n    try {\n      event.preventDefault();\n      const res = await fetch(\"/api/v1/users/login\", {\n        method: \"POST\",\n        body: JSON.stringify(this.state),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      const data = await res.json();\n\n      if (res.ok) {\n        await localStorage.setItem(\"jwt\", data.token);\n        let jwt = await localStorage.getItem(\"jwt\");\n        if (jwt) {\n          let user = jwt_decode(jwt);\n\n          this.props.setUser(user);\n          this.setState({ successfulCreate: true });\n        }\n      } else {\n        console.log(data);\n        alert(data.message);\n      }\n      // console.log(this.props.user);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  render() {\n    console.log(this.state.data);\n    if (this.state.successfulCreate) {\n      return <Redirect to=\"/\" />;\n    }\n\n    return (\n      <Container className=\"App\">\n        <h2>Log In</h2>\n        <Form className=\"form\" onSubmit={this.onSubmit}>\n          <Col>\n            <FormGroup>\n              <Label>Email</Label>\n              <Input\n                type=\"email\"\n                name=\"email\"\n                id=\"exampleEmail\"\n                placeholder=\"myemail@email.com\"\n                value={this.state.email}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label for=\"examplePassword\">Password</Label>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                id=\"examplePassword\"\n                placeholder=\"********\"\n                value={this.state.password}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n\n          <Input type=\"submit\" value=\"Submit\" />\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default LogIn;\n"]},"metadata":{},"sourceType":"module"}