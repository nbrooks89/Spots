{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nicolebrooks/Desktop/spots-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./SignUp.css\";import jwt_decode from\"jwt-decode\";import{Redirect}from\"react-router-dom\";import{Container,Col,Form,FormGroup,Label,Input}from\"reactstrap\";var SignUp=/*#__PURE__*/function(_React$Component){_inherits(SignUp,_React$Component);var _super=_createSuper(SignUp);function SignUp(){var _this;_classCallCheck(this,SignUp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:\"\",email:\"\",password:\"\",passwordConfirm:\"\",data:[],succesfulCreate:false,role:\"user\"};_this.handleInputChange=function(event){var _this$setState;var _event$target=event.target,value=_event$target.value,name=_event$target.name;_this.setState((_this$setState={},_defineProperty(_this$setState,name,value),_defineProperty(_this$setState,\"token\",null),_this$setState));};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var res,data,jwt,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();_context.next=4;return fetch(\"/api/v1/users/signup\",{method:\"POST\",body:JSON.stringify(_this.state),headers:{\"Content-Type\":\"application/json\"}});case 4:res=_context.sent;console.log(res);_context.next=8;return res.json();case 8:data=_context.sent;console.log(data);if(!res.ok){_context.next=19;break;}_context.next=13;return localStorage.setItem(\"jwt\",data.token);case 13:_context.next=15;return localStorage.getItem(\"jwt\");case 15:jwt=_context.sent;if(jwt){user=jwt_decode(jwt);_this.props.setUser(user);_this.setState({successfulCreate:true});}_context.next=21;break;case 19:console.log(data);alert(data.message);case 21:_context.next=26;break;case 23:_context.prev=23;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 26:case\"end\":return _context.stop();}}},_callee,null,[[0,23]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){if(this.state.successfulCreate){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(Container,{className:\"App\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Sign Up\"),/*#__PURE__*/React.createElement(Form,{className:\"form\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(Input,{type:\"name\",name:\"name\",id:\"name\",placeholder:\"Miss GNAR\",value:this.state.name,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,\"Email\"),/*#__PURE__*/React.createElement(Input,{type:\"email\",name:\"email\",id:\"exampleEmail\",placeholder:\"lilMissGNAR@email.com\",value:this.state.email,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"Password\"},\"Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",id:\"examplePassword\",placeholder:\"********\",value:this.state.password,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"confirmPassword\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"confirmPassword\",id:\"confirmPassword\",placeholder:\"********\",value:this.state.confirmPassword,onChange:this.handleInputChange,required:true}))),/*#__PURE__*/React.createElement(Input,{type:\"submit\",value:\"Submit\"})));}}]);return SignUp;}(React.Component);export default SignUp;","map":{"version":3,"sources":["/Users/nicolebrooks/Desktop/spots-front/src/pages/SignUp/SignUp.js"],"names":["React","jwt_decode","Redirect","Container","Col","Form","FormGroup","Label","Input","SignUp","state","name","email","password","passwordConfirm","data","succesfulCreate","role","handleInputChange","event","target","value","setState","onSubmit","preventDefault","fetch","method","body","JSON","stringify","headers","res","console","log","json","ok","localStorage","setItem","token","getItem","jwt","user","props","setUser","successfulCreate","alert","message","confirmPassword","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./SignUp.css\";\nimport jwt_decode from \"jwt-decode\";\nimport { Redirect } from \"react-router-dom\";\nimport { Container, Col, Form, FormGroup, Label, Input } from \"reactstrap\";\n\nclass SignUp extends React.Component {\n  state = {\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirm: \"\",\n    data: [],\n    succesfulCreate: false,\n    role: \"user\",\n  };\n  handleInputChange = (event) => {\n    const { value, name } = event.target;\n\n    this.setState({\n      [name]: value,\n      token: null,\n    });\n  };\n  onSubmit = async (event) => {\n    try {\n      event.preventDefault();\n      const res = await fetch(\"/api/v1/users/signup\", {\n        method: \"POST\",\n        body: JSON.stringify(this.state),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      console.log(res);\n      const data = await res.json();\n      console.log(data);\n      if (res.ok) {\n        await localStorage.setItem(\"jwt\", data.token);\n        let jwt = await localStorage.getItem(\"jwt\");\n        if (jwt) {\n          let user = jwt_decode(jwt);\n\n          this.props.setUser(user);\n          this.setState({ successfulCreate: true });\n        }\n      } else {\n        console.log(data);\n        alert(data.message);\n      }\n      // console.log(this.props.user);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  render() {\n    if (this.state.successfulCreate) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <Container className=\"App\">\n        <h2>Sign Up</h2>\n        <Form className=\"form\">\n          <Col>\n            <FormGroup>\n              <Label for=\"name\">Name</Label>\n              <Input\n                type=\"name\"\n                name=\"name\"\n                id=\"name\"\n                placeholder=\"Miss GNAR\"\n                value={this.state.name}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label>Email</Label>\n              <Input\n                type=\"email\"\n                name=\"email\"\n                id=\"exampleEmail\"\n                placeholder=\"lilMissGNAR@email.com\"\n                value={this.state.email}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label for=\"Password\">Password</Label>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                id=\"examplePassword\"\n                placeholder=\"********\"\n                value={this.state.password}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Col>\n            <FormGroup>\n              <Label for=\"confirmPassword\">Confirm Password</Label>\n              <Input\n                type=\"password\"\n                name=\"confirmPassword\"\n                id=\"confirmPassword\"\n                placeholder=\"********\"\n                value={this.state.confirmPassword}\n                onChange={this.handleInputChange}\n                required\n              />\n            </FormGroup>\n          </Col>\n          <Input type=\"submit\" value=\"Submit\" />\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}